<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
            <title>ë‹¤ë¥¸ ë¶€ë¶„ ì°¾ê¸°</title>
            <script src="/static/js/transition.js"></script>
            <link rel="stylesheet" type="text/css" href="/static/css/style.css">
                <style>
                    @font-face {
                        font-family: 'Orbit';
                        src: url('/static/fonts/Orbit-Regular.ttf') format('truetype');
                    }
                    body {
                        background-color: #ECE6CC;
                        margin: 0;
                        padding: 0;
                        font-family: 'Orbit', sans-serif;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        height: 100vh;
                    }
                    .content {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        width: 100%;
                        text-align: center;
                    }
                    h1 {
                        margin: 0.5em 0;
                    }
                    .game-image {
                        margin-top: 20px;
                        width: 850px;
                    }
                    .typing-text {
                        z-index: 1; /* ì´ë¯¸ì§€ ìœ„ì— í‘œì‹œ */
                        overflow: hidden; /* í…ìŠ¤íŠ¸ ìˆ¨ê¹€ ì²˜ë¦¬ */
                        white-space: nowrap; /* ì¤„ ë°”ê¿ˆ ê¸ˆì§€ */
                        margin: 0 auto; /* ê°€ìš´ë° ì •ë ¬ */
                        margin-top: 5px;
                        margin-bottom: 5px; /* ê°€ìš´ë° ì •ë ¬ */
                        letter-spacing: 0.5px; /* ê¸€ì ê°„ê²© */
                    }
                    .start-button {
                        padding: 10px 20px;
                        font-size: 16px;
                        cursor: pointer;
                        background-color: #b58a55; /* ë²„íŠ¼ ë°°ê²½ìƒ‰ */
                        color: white; /* ê¸€ì”¨ìƒ‰ */
                        border: none; /* í…Œë‘ë¦¬ ì œê±° */
                        border-radius: 20px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
                        font-family: 'Orbit', sans-serif; /* ê¸€ì”¨ì²´ */
                        margin-top: 5px; /* Add some space above the button */
                        transition: background-color 0.3s ease; /* ë°°ê²½ìƒ‰ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
                    }
                    .start-button:hover {
                        background-color: #d4a56c; /* ì»¤ì„œë¥¼ ê°€ì ¸ë‹¤ ëŒ€ë©´ ë°°ê²½ìƒ‰ ë³€ê²½ */
                    }
                    .start-button.disabled-button {
                        background-color: #968d81 !important; /* ë¹„í™œì„±í™”ëœ ë²„íŠ¼ ë°°ê²½ìƒ‰ */
                        cursor: not-allowed !important;
                    }
                    .home-button {
                        position: absolute;
                        padding: 10px 20px;
                        font-size: 16px;
                        cursor: pointer;
                        color: white; /* ê¸€ì”¨ìƒ‰ */
                        background-color: #b58a55;
                        border: none; /* í…Œë‘ë¦¬ ì œê±° */
                        border-radius: 20px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
                        font-family: 'Orbit', sans-serif; /* ê¸€ì”¨ì²´ */
                        top: 50px; /* ìœ„ì—ì„œ 10px ìœ„ì¹˜ */
                        right: 50px; /* ì˜¤ë¥¸ìª½ì—ì„œ 10px ìœ„ì¹˜ */
                    }
                    .home-button:hover {
                        background-color: #d4a56c; /* ì»¤ì„œë¥¼ ê°€ì ¸ë‹¤ ëŒ€ë©´ ë°°ê²½ìƒ‰ ë³€ê²½ */
                    }
                    .hint-button {
                        position: absolute;
                        padding: 10px 20px;
                        font-size: 16px;
                        cursor: pointer;
                        color: white; /* ê¸€ì”¨ìƒ‰ */
                        background-color: #b58a55;
                        border: none; /* í…Œë‘ë¦¬ ì œê±° */
                        border-radius: 20px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
                        font-family: 'Orbit', sans-serif; /* ê¸€ì”¨ì²´ */
                        top: 35px; /* ìœ„ì—ì„œ 10px ìœ„ì¹˜ */
                        left: 40px; /* ì™¼ìª½ì—ì„œ 10px ìœ„ì¹˜ */
                    }
                    .hint-button:hover {
                        background-color: #d4a56c; /* ì»¤ì„œë¥¼ ê°€ì ¸ë‹¤ ëŒ€ë©´ ë°°ê²½ìƒ‰ ë³€ê²½ */
                    }
                    .hint-button.disabled-button {
                        background-color: #968d81 !important; /* íŒíŠ¸ ë²„íŠ¼ ë¹„í™œì„±í™”ëœ ë°°ê²½ìƒ‰ */
                        cursor: not-allowed !important;
                    }
                    .game-container {
                        position: relative;
                        cursor: pointer;
                    }
                    .checkmark {
                        position: absolute;
                        background: url('/static/images/checkmark.png') no-repeat;
                        background-size: contain;
                        width: 30px;
                        height: 30px;
                        z-index: 10;
                    }
                    .progress-bar {
                        font-size: 20px;
                    }
                </style>
                <script>
                    // ì²´í¬ í‘œì‹œëœ ê°œìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜
                    var checkmarkCount = 0;
                    // ì°¾ì•„ì•¼ í•  ì¢Œí‘œ ë°°ì—´
                    var specifiedCoordinates = [
                                                { x: 772, y: 68, label: 'ë‹¬' },
                                                { x: 674, y: 128, label: 'ì›ìˆ­ì´ ê·€' },
                                                { x: 439, y: 278, label: 'í…íŠ¸ ì™¼ìª½ ì•„ë˜' },
                                                { x: 481, y: 82, label: 'í…íŠ¸ ì˜† ë³„' },
                                                { x: 683, y: 348, label: 'ì˜´íŒ¡ì´ ì¹˜ë§ˆ ì' },
                                                { x: 816, y: 165, label: 'ë¹¨ê°„ ê¹ƒí„¸' },
                                                { x: 628, y: 376, label: 'ë‚˜ë¬´ ì¥ì‘' }
                                                ];
                                                // ì´ëª¨ì§€ ë°°ì—´
                                                var Emojis = ["", "ğŸ˜¶ ", "ğŸ™‚ ", "ğŸ˜€ ", "ğŸ˜ƒ ", "ğŸ˜„ ", "ğŸ˜ ", "ğŸ˜† "];
                                                // í˜„ì¬ ì´ëª¨ì§€ ì¸ë±ìŠ¤
                                                var currentIndex = 0;
                                                // ì°¾ì§€ ì•Šì€ ì¢Œí‘œ ë°°ì—´ (ì´ˆê¸°ì—ëŠ” ëª¨ë‘ í¬í•¨)
                                                var notFoundCoordinates = specifiedCoordinates.slice();
                                                // íŒíŠ¸ ë²„íŠ¼ í´ë¦­ ì—¬ë¶€
                                                var hintClicked = false;
                                                // íŒíŠ¸ ë²ˆí˜¸
                                                var hintnum = 0;
                                                
                                                // ì°¨ì´ì  í‘œì‹œ í•¨ìˆ˜
                                                function markDifference(event) {
                                                    if (checkmarkCount >= specifiedCoordinates.length) {
                                                        return; // ëª¨ë“  ì²´í¬ í‘œì‹œê°€ ì´ë¯¸ ë˜ì—ˆì„ ê²½ìš° í•¨ìˆ˜ ì¢…ë£Œ
                                                    }
                                                    
                                                    // í´ë¦­ëœ ìš”ì†Œê°€ ì´ë¯¸ì§€ì¸ì§€ í™•ì¸
                                                    if (event.target.tagName !== 'IMG') {
                                                        return; // ì´ë¯¸ì§€ê°€ ì•„ë‹Œ ê²½ìš° í•¨ìˆ˜ ì¢…ë£Œ
                                                    }
                                                    
                                                    // ì´ë¯¸ì§€ ë‚´ì˜ í´ë¦­ ìœ„ì¹˜ ê³„ì‚°
                                                    var imgRect = event.target.getBoundingClientRect();
                                                    var x = event.clientX - imgRect.left;
                                                    var y = event.clientY - imgRect.top;
                                                    
                                                    // ì´ë¯¸ì§€ ì™¼ìª½ ì ˆë°˜ì„ í´ë¦­í•œ ê²½ìš°
                                                    if (x < imgRect.width / 2) {
                                                        alert("ì˜¤ë¥¸ìª½ ì˜´íŒ¡ì´ ê·¸ë¦¼ì—ì„œ í´ë¦­í•´ì£¼ì„¸ìš”");
                                                        return; // ì´ë¯¸ì§€ì˜ ì™¼ìª½ ì ˆë°˜ì„ í´ë¦­í•œ ê²½ìš° í•¨ìˆ˜ ì¢…ë£Œ
                                                    }
                                                    
                                                    // ì§€ì •ëœ ì¢Œí‘œ ì£¼ë³€ì˜ ì‚¬ê°í˜• ë²”ìœ„ í™•ì¸
                                                    for (var i = 0; i < specifiedCoordinates.length; i++) {
                                                        var coordinate = specifiedCoordinates[i];
                                                        var xDiff = Math.abs(x - coordinate.x);
                                                        var yDiff = Math.abs(y - coordinate.y);
                                                        
                                                        // í´ë¦­í•œ ìœ„ì¹˜ê°€ ì¢Œí‘œ ì£¼ë³€ì˜ ë²”ìœ„ ë‚´ì— ìˆìœ¼ë©´ ì²´í¬ í‘œì‹œ ì¶”ê°€
                                                        if (xDiff <= 20 && yDiff <= 20) {
                                                            var checkmark = document.createElement('div');
                                                            checkmark.className = 'checkmark';
                                                            checkmark.style.left = (coordinate.x - 15) + 'px'; // ì¡°ì •ëœ ìœ„ì¹˜
                                                            checkmark.style.top = (coordinate.y) + 'px'; // ì¡°ì •ëœ ìœ„ì¹˜
                                                            
                                                            // ì²´í¬ ë§ˆí¬ë¥¼ ê²Œì„ ì»¨í…Œì´ë„ˆì— ì¶”ê°€
                                                            var container = event.currentTarget;
                                                            container.appendChild(checkmark);
                                                            
                                                            // ì²´í¬ í‘œì‹œ ê°œìˆ˜ ì¦ê°€
                                                            checkmarkCount++;
                                                            
                                                            // ëª¨ë“  ì²´í¬ í‘œì‹œê°€ ë˜ë©´ ë²„íŠ¼ í™œì„±í™” ë° ìƒ‰ìƒ ë³€ê²½
                                                            if (checkmarkCount === specifiedCoordinates.length) {
                                                                var button = document.querySelector('.start-button');
                                                                button.classList.remove('disabled-button');
                                                            }
                                                            
                                                            // ê²Œì´ì§€ ë°” ì—…ë°ì´íŠ¸
                                                            var progressBar = document.querySelector('.progress-bar');
                                                            var emojiIndex = Math.min(checkmarkCount, Emojis.length - 1); // ì˜¤ë²„í”Œë¡œìš° ë°©ì§€
                                                            progressBar.textContent = Emojis.slice(0, emojiIndex + 1).join('') + 'ğŸ«¥ '.repeat(specifiedCoordinates.length - checkmarkCount);
                                                            currentIndex = emojiIndex;
                                                            
                                                            // í•´ë‹¹ ì¢Œí‘œë¥¼ ì°¾ì€ ê²ƒìœ¼ë¡œ í‘œì‹œí•˜ê³  notFoundCoordinatesì—ì„œ ì œê±°
                                                            notFoundCoordinates = notFoundCoordinates.filter(function(coord) {
                                                                return !(coord.x === coordinate.x && coord.y === coordinate.y);
                                                            });
                                                            
                                                            break; // ì²´í¬ í‘œì‹œë¥¼ ì¶”ê°€í•œ í›„ ì¢…ë£Œ
                                                        }
                                                    }
                                                    
                                                    // íŒíŠ¸ ë²„íŠ¼ ì—…ë°ì´íŠ¸
                                                    updateHintButtonState();
                                                }
                    
                    // í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜
                    function transitionToPage(url) {
                        // ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆëŠ” ê²½ìš°ì—ë§Œ í˜ì´ì§€ ì „í™˜
                        var button = document.querySelector('.start-button');
                        if (!button.classList.contains('disabled-button')) {
                            document.body.classList.add('fade-out');
                            setTimeout(function () {
                                window.location.href = url;
                            }, 1000); // 0.5ì´ˆ í›„ì— í˜ì´ì§€ ì „í™˜
                        }
                    }
                    function typeText() {
                        var text = "ì˜¤ë¥¸ìª½ ì˜´íŒ¡ì´ ê·¸ë¦¼ì—ì„œ ë‹¤ë¥¸ ë¶€ë¶„ì„ ì°¾ì•„ í´ë¦­í•˜ì„¸ìš”.";
                        var typingText = document.getElementById('typing-text');
                        var charIndex = typingText.innerHTML.length;
                        
                        if (charIndex < text.length) {
                            typingText.innerHTML += text.charAt(charIndex);
                            setTimeout(typeText, 50);
                        }
                    }
                    
                    document.addEventListener('DOMContentLoaded', function () {
                        // ... (ì´ì „ ì½”ë“œ) ...
                        // í˜ì´ì§€ ë¡œë”© í›„ íƒ€ì´í•‘ íš¨ê³¼ ì‹œì‘
                        setTimeout(typeText, 1000); // 1ì´ˆ í›„ì— íƒ€ì´í•‘ íš¨ê³¼ ì‹œì‘
                    });
                    
                    // í™”ë©´ í¬ê¸° ì¡°ì • ì‹œ ëª¨ë“  ì²´í¬ í‘œì‹œ ì´ˆê¸°í™”
                    function clearCheckmarks() {
                        var checkmarks = document.querySelectorAll('.checkmark');
                        checkmarks.forEach(function (checkmark) {
                            checkmark.remove(); // ê° ì²´í¬ í‘œì‹œ ì œê±°
                        });
                        checkmarkCount = 0; // ì²´í¬ í‘œì‹œ ê°œìˆ˜ ì´ˆê¸°í™”
                        var button = document.querySelector('.start-button');
                        button.classList.add('disabled-button'); // ë²„íŠ¼ ë¹„í™œì„±í™”
                        // ê²Œì´ì§€ ë°” ì´ˆê¸°í™”
                        var progressBar = document.querySelector('.progress-bar');
                        progressBar.textContent = 'ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥';
                    }
                    
                    // í™”ë©´ í¬ê¸° ì¡°ì • ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                    window.addEventListener('resize', clearCheckmarks);
                    
                    // íŒíŠ¸ í‘œì‹œ í•¨ìˆ˜
                    function showHint() {
                        if (!hintClicked) {
                            if (hintnum == 1) {
                                alert("ë§ˆì§€ë§‰ íŒíŠ¸: " + notFoundCoordinates[0].label);
                                hintClicked = true;
                                var hintButton = document.querySelector('.hint-button');
                                hintButton.textContent = "íŒíŠ¸ ë";
                                hintnum++;
                                hintButton.classList.add('disabled-button'); // íŒíŠ¸ ë§ˆì§€ë§‰ ë²„íŠ¼ ë¹„í™œì„±í™”
                                
                            } else if (hintnum == 0) {
                                var randomIndex = Math.floor(Math.random() * notFoundCoordinates.length);
                                var hintText = "ì²«ë²ˆì§¸ íŒíŠ¸: " + notFoundCoordinates[randomIndex].label +"\n\n(* íŒíŠ¸ í•œ ê°œ ë‚¨ì•˜ìŠµë‹ˆë‹¤.)";
                                if (checkmarkCount === specifiedCoordinates.length) {
                                    alert("ë‹¤ ì°¾ì•˜ìŠµë‹ˆë‹¤!");
                                }
                                else{
                                    alert(hintText);
                                }
                                hintnum ++;
                            } else {
                                alert("ë” ì´ìƒ íŒíŠ¸ë¥¼ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                            }
                        }
                    }
                    
                    // í™ˆìœ¼ë¡œ ì´ë™ í•¨ìˆ˜
                    function goHome() {
                        window.location.href = "/"; // í™ˆí˜ì´ì§€ ì£¼ì†Œë¡œ ì´ë™
                    }
                    
                    // íŒíŠ¸ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
                    function updateHintButtonState() {
                        var hintButton = document.querySelector('.hint-button');
                        if (checkmarkCount === specifiedCoordinates.length || hintClicked) {
                            hintButton.classList.add('disabled-button'); // íŒíŠ¸ ë²„íŠ¼ ë¹„í™œì„±í™”
                        } else {
                            hintButton.classList.remove('disabled-button'); // íŒíŠ¸ ë²„íŠ¼ í™œì„±í™”
                        }
                    }
                    
                </script>
            </head>
    <body>
        <div class="content">
            <h1>ì˜´íŒ¡ì§€ê²Œ ì¦ê±°ìš´ í‹€ë¦° ê·¸ë¦¼ ì°¾ê¸°</h1>
            <p id="typing-text" class="typing-text"></p>
            <div class="game-container" onclick="markDifference(event)">
                <img src="/static/images/difference.jpeg" alt="Find the Difference Game" class="game-image">
            </div>
            <p class="progress-bar">ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥ ğŸ«¥</p>
            <button onclick="transitionToPage('/webcam')" class="start-button disabled-button">Next</button>
            <button class="home-button" onclick="goHome()">í™ˆìœ¼ë¡œ</button>
            <button class="hint-button" onclick="showHint()">íŒíŠ¸ ë³´ê¸°</button>
        </div>
    </body>
</html>

